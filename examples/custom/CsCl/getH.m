function [H] = getH(pg,v,kpt)
i2pi = 2*sqrt(-1)*pi;
H(1:8,1:8) = 0;
% irreducible shell 1
H(1:4,1:4) = H(1:4,1:4) + pg.sym(1:4,1:4,1)' * getV1(v(1:2)) * pg.sym(1:4,1:4,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 2
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,1)' * getV2(v(2:6)) * pg.sym(5:8,5:8,1) * exp(i2pi*dot(kpt,[+2.10453, -2.10453, +2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,8)' * getV2(v(2:6)) * pg.sym(5:8,5:8,8) * exp(i2pi*dot(kpt,[-2.10453, -2.10453, +2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,10)' * getV2(v(2:6)) * pg.sym(5:8,5:8,10) * exp(i2pi*dot(kpt,[+2.10453, +2.10453, +2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,4)' * getV2(v(2:6)) * pg.sym(5:8,5:8,4) * exp(i2pi*dot(kpt,[-2.10453, +2.10453, +2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,5)' * getV2(v(2:6)) * pg.sym(5:8,5:8,5) * exp(i2pi*dot(kpt,[+2.10453, -2.10453, -2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,2)' * getV2(v(2:6)) * pg.sym(5:8,5:8,2) * exp(i2pi*dot(kpt,[-2.10453, -2.10453, -2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,3)' * getV2(v(2:6)) * pg.sym(5:8,5:8,3) * exp(i2pi*dot(kpt,[+2.10453, +2.10453, -2.10453]));
H(1:4,5:8) = H(1:4,5:8) + pg.sym(1:4,1:4,6)' * getV2(v(2:6)) * pg.sym(5:8,5:8,6) * exp(i2pi*dot(kpt,[-2.10453, +2.10453, -2.10453]));
% irreducible shell 2
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,1)' * getV2(v(2:6))' * pg.sym(1:4,1:4,1) * exp(i2pi*dot(kpt,[+2.10453, -2.10453, +2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,8)' * getV2(v(2:6))' * pg.sym(1:4,1:4,8) * exp(i2pi*dot(kpt,[-2.10453, -2.10453, +2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,10)' * getV2(v(2:6))' * pg.sym(1:4,1:4,10) * exp(i2pi*dot(kpt,[+2.10453, +2.10453, +2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,4)' * getV2(v(2:6))' * pg.sym(1:4,1:4,4) * exp(i2pi*dot(kpt,[-2.10453, +2.10453, +2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,5)' * getV2(v(2:6))' * pg.sym(1:4,1:4,5) * exp(i2pi*dot(kpt,[+2.10453, -2.10453, -2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,2)' * getV2(v(2:6))' * pg.sym(1:4,1:4,2) * exp(i2pi*dot(kpt,[-2.10453, -2.10453, -2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,3)' * getV2(v(2:6))' * pg.sym(1:4,1:4,3) * exp(i2pi*dot(kpt,[+2.10453, +2.10453, -2.10453]));
H(5:8,1:4) = H(5:8,1:4) + pg.sym(5:8,5:8,6)' * getV2(v(2:6))' * pg.sym(1:4,1:4,6) * exp(i2pi*dot(kpt,[-2.10453, +2.10453, -2.10453]));
% irreducible shell 3
H(5:8,5:8) = H(5:8,5:8) + pg.sym(5:8,5:8,1)' * getV3(v(6:7)) * pg.sym(5:8,5:8,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
end

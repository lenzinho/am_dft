function [H] = getH(pg,v,kpt)
i2pi = 2*sqrt(-1)*pi;
H(1:24,1:24) = 0;
% irreducible shell 1
H(1:4,1:4) = H(1:4,1:4) + pg.sym(1:4,1:4,1)' * getV1(v(1:3)) * pg.sym(1:4,1:4,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 1
H(5:8,5:8) = H(5:8,5:8) + pg.sym(5:8,5:8,1)' * getV1(v(1:3)) * pg.sym(5:8,5:8,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 2
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,1)' * getV2(v(3:12)) * pg.sym(13:16,13:16,1) * exp(i2pi*dot(kpt,[+1.73961, -1.00437, +1.60287]));
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,9)' * getV2(v(3:12)) * pg.sym(13:16,13:16,9) * exp(i2pi*dot(kpt,[-1.73961, -1.00437, +1.60287]));
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,10)' * getV2(v(3:12)) * pg.sym(13:16,13:16,10) * exp(i2pi*dot(kpt,[+0.00000, +2.00873, +1.60287]));
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,4)' * getV2(v(3:12)) * pg.sym(13:16,13:16,4) * exp(i2pi*dot(kpt,[+1.73961, -1.00437, -1.60287]));
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,3)' * getV2(v(3:12)) * pg.sym(13:16,13:16,3) * exp(i2pi*dot(kpt,[-1.73961, -1.00437, -1.60287]));
H(1:4,13:16) = H(1:4,13:16) + pg.sym(1:4,1:4,5)' * getV2(v(3:12)) * pg.sym(13:16,13:16,5) * exp(i2pi*dot(kpt,[+0.00000, +2.00873, -1.60287]));
% irreducible shell 2
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,1)' * getV2(v(3:12)) * pg.sym(21:24,21:24,1) * exp(i2pi*dot(kpt,[+0.00000, -2.00873, +1.60287]));
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,10)' * getV2(v(3:12)) * pg.sym(21:24,21:24,10) * exp(i2pi*dot(kpt,[+1.73961, +1.00437, +1.60287]));
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,9)' * getV2(v(3:12)) * pg.sym(21:24,21:24,9) * exp(i2pi*dot(kpt,[-1.73961, +1.00437, +1.60287]));
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,3)' * getV2(v(3:12)) * pg.sym(21:24,21:24,3) * exp(i2pi*dot(kpt,[+0.00000, -2.00873, -1.60287]));
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,4)' * getV2(v(3:12)) * pg.sym(21:24,21:24,4) * exp(i2pi*dot(kpt,[+1.73961, +1.00437, -1.60287]));
H(5:8,21:24) = H(5:8,21:24) + pg.sym(5:8,5:8,5)' * getV2(v(3:12)) * pg.sym(21:24,21:24,5) * exp(i2pi*dot(kpt,[-1.73961, +1.00437, -1.60287]));
% irreducible shell 3
H(9:12,9:12) = H(9:12,9:12) + pg.sym(9:12,9:12,1)' * getV3(v(12:14)) * pg.sym(9:12,9:12,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 3
H(13:16,13:16) = H(13:16,13:16) + pg.sym(13:16,13:16,1)' * getV3(v(12:14)) * pg.sym(13:16,13:16,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 3
H(17:20,17:20) = H(17:20,17:20) + pg.sym(17:20,17:20,1)' * getV3(v(12:14)) * pg.sym(17:20,17:20,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 3
H(21:24,21:24) = H(21:24,21:24) + pg.sym(21:24,21:24,1)' * getV3(v(12:14)) * pg.sym(21:24,21:24,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +0.00000]));
% irreducible shell 4
H(9:12,5:8) = H(9:12,5:8) + pg.sym(9:12,9:12,1)' * getV4(v(14:23))' * pg.sym(5:8,5:8,1) * exp(i2pi*dot(kpt,[+1.73961, -1.00437, +1.60287]));
H(9:12,5:8) = H(9:12,5:8) + pg.sym(9:12,9:12,9)' * getV4(v(14:23))' * pg.sym(5:8,5:8,9) * exp(i2pi*dot(kpt,[-1.73961, -1.00437, +1.60287]));
H(9:12,5:8) = H(9:12,5:8) + pg.sym(9:12,9:12,10)' * getV4(v(14:23))' * pg.sym(5:8,5:8,10) * exp(i2pi*dot(kpt,[+0.00000, +2.00873, +1.60287]));
% irreducible shell 4
H(13:16,1:4) = H(13:16,1:4) + pg.sym(13:16,13:16,1)' * getV4(v(14:23))' * pg.sym(1:4,1:4,1) * exp(i2pi*dot(kpt,[+0.00000, -2.00873, -1.60287]));
H(13:16,1:4) = H(13:16,1:4) + pg.sym(13:16,13:16,10)' * getV4(v(14:23))' * pg.sym(1:4,1:4,10) * exp(i2pi*dot(kpt,[+1.73961, +1.00437, -1.60287]));
H(13:16,1:4) = H(13:16,1:4) + pg.sym(13:16,13:16,9)' * getV4(v(14:23))' * pg.sym(1:4,1:4,9) * exp(i2pi*dot(kpt,[-1.73961, +1.00437, -1.60287]));
% irreducible shell 4
H(17:20,1:4) = H(17:20,1:4) + pg.sym(17:20,17:20,1)' * getV4(v(14:23))' * pg.sym(1:4,1:4,1) * exp(i2pi*dot(kpt,[+0.00000, -2.00873, +1.60287]));
H(17:20,1:4) = H(17:20,1:4) + pg.sym(17:20,17:20,10)' * getV4(v(14:23))' * pg.sym(1:4,1:4,10) * exp(i2pi*dot(kpt,[+1.73961, +1.00437, +1.60287]));
H(17:20,1:4) = H(17:20,1:4) + pg.sym(17:20,17:20,9)' * getV4(v(14:23))' * pg.sym(1:4,1:4,9) * exp(i2pi*dot(kpt,[-1.73961, +1.00437, +1.60287]));
% irreducible shell 4
H(21:24,5:8) = H(21:24,5:8) + pg.sym(21:24,21:24,1)' * getV4(v(14:23))' * pg.sym(5:8,5:8,1) * exp(i2pi*dot(kpt,[+1.73961, -1.00437, -1.60287]));
H(21:24,5:8) = H(21:24,5:8) + pg.sym(21:24,21:24,9)' * getV4(v(14:23))' * pg.sym(5:8,5:8,9) * exp(i2pi*dot(kpt,[-1.73961, -1.00437, -1.60287]));
H(21:24,5:8) = H(21:24,5:8) + pg.sym(21:24,21:24,10)' * getV4(v(14:23))' * pg.sym(5:8,5:8,10) * exp(i2pi*dot(kpt,[+0.00000, +2.00873, -1.60287]));
% irreducible shell 5
H(9:12,21:24) = H(9:12,21:24) + pg.sym(9:12,9:12,1)' * getV5(v(23:26)) * pg.sym(21:24,21:24,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +3.20574]));
% irreducible shell 5
H(13:16,17:20) = H(13:16,17:20) + pg.sym(13:16,13:16,1)' * getV5(v(23:26)) * pg.sym(17:20,17:20,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, -3.20574]));
% irreducible shell 5
H(17:20,13:16) = H(17:20,13:16) + pg.sym(17:20,17:20,1)' * getV5(v(23:26))' * pg.sym(13:16,13:16,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, +3.20574]));
% irreducible shell 5
H(21:24,9:12) = H(21:24,9:12) + pg.sym(21:24,21:24,1)' * getV5(v(23:26))' * pg.sym(9:12,9:12,1) * exp(i2pi*dot(kpt,[+0.00000, +0.00000, -3.20574]));
end
